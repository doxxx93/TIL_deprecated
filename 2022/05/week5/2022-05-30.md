# 성공과 실패를 결정하는 1%의 네트워크 원리

## Chapter 1. 웹 브라우저가 메시지를 만든다

### 목차
- HTTP 리퀘스트 메시지를 작성한다
  - 브라우저에 URL을 입력하고, 브라우저가 URL을 해독한다.
  - URL의 의미에 따라 리퀘스트 메시지를 작성한다.
- 웹 서버의 IP 주소를 DNS 서버에 조회한다
  - 메시지를 OS에 의뢰해서 웹 서버에 송신한다
    - 상대의 IP주소를 OS에 통지한다
  - 브라우저는 웹 서버의 IP주소를 조사한다
    - URL에는 웹 서버의 도메인명이 쓰여있고, DNS서버에 조회하여 IP주소를 조사한다
- 전 세계의 DNS 서버가 연대한다
  - DNS 서버가 연대하여 IP주소를 조사한다
- 프로토콜 스택에 메시지 송신을 의뢰한다

### HTTP 리퀘스트 메시지를 작성한다
- URL 입력
  - URL의 맨앞에 있는 문자열(http:, ftp:, file: 등)은 엑세스하는 방법을 나타낸다
- 브라우저는 먼저 URL을 해독한다
  - `http:`: URL의 맨 앞에는 데이터 출처에 엑세스 하는 방법, 프로토콜을 기록
  - `//`: 나중에 이어지는 문자열이 서버의 이름임을 나타냄
  - 웹 서버명
  - 경로명
    - /
    - 디렉토리명
    - 파일명: 생략 가능하지만 보통 `index.html` 또는 `default.htm`등 이다.
- HTTP의 기본 개념
  - HTTP 프로토콜은 클라이언트와 서버가 주고 받는 메시지의 내용이나 순서를 정한 것
- HTTP 리퀘스트 메시지를 만든다
  - 리퀘스트 라인
    - 메소드 

## Chapter 6. 웹 서버에 도착하여 응답 데이터가 웹 브라우저로 돌아간다

패킷이 웹 서버 안으로 들어간 후의 과정

### 목차
- 서버의 개요
  - 서버 애플리케이션 전체의 구조나 기동 후에 수행하는 준비 동작을 통해 서버가 무엇인지 학습
- 서버의 수신 동작
  - 서버의 프로토콜 스택의 수신 동작을 학습
  - 신호를 수신하여 디지털 패킷으로 되돌려주고, 여기에서 HTTP 메시지를 추출하는 동작
  - 프로토콜 스택이 수신한 메시지를 Socket 라이브러리를 통해 웹 서버 애플리케이션에 건내주는 동작
- 웹 서버 소프트웨어가 리퀘스트 메시지의 의미를 해석하여 요구에 응한다
  - 웹 서버 애플리케이션은 메시지의 내용을 조사하고, 요구된 처리를 실행하며, 결과를 클라이언트에 반송
- 웹 브라우저가 응답 메시지를 받아 화면에 표시한다
  - 웹 서버가 반송한 응답 메시지가 인터넷을 통해 클라이언트 PC의 브라우저에 도착하면 브라우저에 메시지 내용이 표시

### 서버의 개요

#### 클라이언트와 서버의 차이점

- 패킷이 웹 서버에 도착하면 웹 서버는 이를 처리한다. 
- 서버를 기동한 후 여러가지 준비 동작을 하고 클라이언트에서의 액세스에 응하는 상태가 된다.

- 서버와 클라이언트는 Socket 라이브러리의 프로그램 부품이 다르다.

#### 서버 애플리케이션의 구조

- 서버는 동시에 복수의 클라이언트와 통신 동작을 실행한다.
- 클라이언트가 접속할 때마다 새로 서버 프로그램을 작동하여 서버 애플리케이션이 클라이언트와 1대1로 대화한다.

- 서버프로그램은 접속을 기다리는 부분과 클라이언트와 대화하는 부분 둘로 나누어 만든다.
- 설정 파일 읽기 등의 초기화 동작이 끝나면 접속을 기다리는 부분을 실행한다.
- 접속을 기다리는 부분은 소켓을 작성하고 소켓을 클라이언트에서의 접속 동작을 기다리는 상태로 만든채 쉬는 상태가 된다.
- 클라이언트가 접속했을 때 다시 작동하여 접속을 기다린다.
- 클라이언트와 대화하는 부분을 작동시켜 그곳에 접속이 끝난 소켓을 건네주고

#### 서버측의 소켓과 포트 번호

- 서버와 클라이언트는 거의 좌우 대칭의 역할을 갖고 있다.
- 접속 동작의 경우 좌우 대칭으로 만들 수 없는 부분이다.
- 접속 동작은 한쪽이 기다리고 있는 곳에 또 한쪽을 연결해야 한다.
  - 따라서 접속하는 측이 클라이언트, 접속을 기다리는 측이 서버

- 클라이언트와 서버의 Socket 라이브러리 호출 차이점
- 클라이언트
  - 소켓을 만든다(소켓 작성 단계)
  - 서버측의 소켓과 파이프로 연결(접속 단계)
  - 데이터를 송수신한다.(송수신단계)
  - 파이프를 분리하고 소켓을 말소한다(연결 끊기 단계)
- 서버
  - 소켓을 만든다(소켓 작성 단계)
  - 소켓을 접속 대기 상태로 만든다(접속 대기 상태)
  - 접속을 접수한다(접속 접수 단계)
  - 데이터를 송수신한다(송수신단계)
  - 파이프를 분리하고 소켓을 말소한다(연결 끊기 단계)


